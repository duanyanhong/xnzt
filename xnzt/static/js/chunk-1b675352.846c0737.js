(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b675352","chunk-507b3778","chunk-39413ce8","chunk-3a08d90c"],{"1e8b":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[s("el-input",{attrs:{maxlength:"30"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),s("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[s("el-input",{attrs:{maxlength:"30"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),s("el-form-item",{attrs:{label:"手机号",prop:"mobileNo"}},[s("el-input",{attrs:{maxlength:"11"},model:{value:e.form.mobileNo,callback:function(t){e.$set(e.form,"mobileNo",t)},expression:"form.mobileNo"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},a=[],i=s("c0c7"),o={props:{user:{type:Object}},data:function(){return{form:{},rules:{}}},watch:{user:{handler:function(e){e&&(this.form={nickName:e.nickName,userName:e.userName,mobileNo:e.mobileNo})}}},methods:{submit:function(){var e=this,t={userName:this.form.userName,nickName:this.form.nickName,mobileNo:this.form.mobileNo,accessToken:sessionStorage.getItem("xn_token")};Object(i["b"])(t).then((function(t){t&&(e.$modal.notifySuccess("修改成功"),e.user.userName=e.form.userName,e.user.nickName=e.form.nickName,e.user.mobileNo=e.form.mobileNo)}))},close:function(){this.$tab.closePage()}}},n=o,l=s("2877"),c=Object(l["a"])(n,r,a,!1,null,null,null);t["default"]=c.exports},4601:function(e,t,s){},"4c1b":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,xs:24}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("个人信息")])]),s("div",[s("div",{staticClass:"text-center"},[s("userAvatar")],1),s("ul",{staticClass:"list-group list-group-striped"},[s("li",{staticClass:"list-group-item"},[s("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"login"}}),e._v("登录账号 "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.user.userAccount))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"user1"}}),e._v("用户姓名 "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.user.userName))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"phone"}}),e._v("手机号码 "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.user.mobileNo))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"dept"}}),e._v("公司名称 "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.user.companyName))])],1)])])])],1),s("el-col",{attrs:{span:18,xs:24}},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("基本资料")])]),s("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[s("userInfo",{attrs:{user:e.user}})],1),s("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[s("resetPwd")],1)],1)],1)],1)],1)],1)},a=[],i=s("9429"),o=s("1e8b"),n=s("ee46"),l=s("c0c7"),c={name:"Profile",components:{userAvatar:i["default"],userInfo:o["default"],resetPwd:n["default"]},data:function(){return{user:{},activeTab:"userinfo"}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(l["a"])().then((function(t){e.user=t.msgData.user}))}}},u=c,m=s("2877"),f=Object(m["a"])(u,r,a,!1,null,null,null);t["default"]=f.exports},9429:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"user-info-head"},[s("img",{staticClass:"img-circle img-lg",attrs:{src:e.options.img,title:"点击上传头像"}})])])},a=[],i=s("4360"),o={data:function(){return{options:{img:i["a"].getters.avatar}}},methods:{}},n=o,l=(s("bb4f"),s("2877")),c=Object(l["a"])(n,r,a,!1,null,"1889d730",null);t["default"]=c.exports},bb4f:function(e,t,s){"use strict";s("4601")},c0c7:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o}));var r=s("b775");function a(){var e=sessionStorage.getItem("xn_token");return Object(r["a"])({url:"xnkj/login/login/refreshRole",method:"post",data:{accessToken:e}})}function i(e){return Object(r["a"])({url:"xnkj/login/login/updateInfo",method:"post",data:e})}function o(e){return Object(r["a"])({url:"xnkj/login/login/updatePwd",method:"post",data:e})}},ee46:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"旧密码",prop:"oldPass"}},[s("el-input",{attrs:{placeholder:"请输入旧密码",type:"password","show-password":""},model:{value:e.user.oldPass,callback:function(t){e.$set(e.user,"oldPass",t)},expression:"user.oldPass"}})],1),s("el-form-item",{attrs:{label:"新密码",prop:"newPass"}},[s("el-input",{attrs:{placeholder:"请输入新密码",type:"password","show-password":""},model:{value:e.user.newPass,callback:function(t){e.$set(e.user,"newPass",t)},expression:"user.newPass"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"confirmPass"}},[s("el-input",{attrs:{placeholder:"请确认新密码",type:"password","show-password":""},model:{value:e.user.confirmPass,callback:function(t){e.$set(e.user,"confirmPass",t)},expression:"user.confirmPass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},a=[],i=(s("d9e2"),s("c0c7")),o={data:function(){var e=this,t=function(t,s,r){s?e.user.newPass!==s?r(new Error("两次输入的密码不一致")):r():r(new Error("请再次输入密码"))};return{user:{oldPass:void 0,newPass:void 0,confirmPass:void 0},rules:{oldPass:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPass:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var s={oldPwd:e.user.oldPass,newPwd:e.user.newPass,confirmPwd:e.user.confirmPass,accessToken:sessionStorage.getItem("xn_token")};Object(i["c"])(s).then((function(t){t&&(e.$modal.notifySuccess("修改成功"),e.user.oldPass="",e.user.newPass="",e.user.confirmPass="")}))}}))},close:function(){this.$tab.closePage()}}},n=o,l=s("2877"),c=Object(l["a"])(n,r,a,!1,null,null,null);t["default"]=c.exports}}]);