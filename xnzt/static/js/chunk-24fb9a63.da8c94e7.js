(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24fb9a63"],{"98cd":function(e,t,a){"use strict";(function(e){a("e9c4"),a("b64b");var o=a("fe4a");t["a"]={name:"Isolate",data:function(){return{rules:{warehouseId:[{type:"array",required:!0,message:"请至少选择一个逻辑仓库",trigger:"change"}],ownerId:[{type:"array",required:!0,message:"请至少选择一个货主",trigger:"change"}],shopId:[{type:"array",required:!0,message:"请至少选择一个店铺",trigger:"change"}],logicWarehouseId:[{type:"array",required:!0,message:"请至少选择一个物理仓库",trigger:"change"}]},searchData:{userId:"",userName:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],storeArr:[],ownerArr:[],shopArr:[],logicWarehouses:[],all:!1,total:0,loading:!1,formIsshow:!1,formData:{userId:"",warehouseId:[],ownerId:[],shopId:[],logicWarehouseId:[],accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理数据权限",checkStore:!1,checkShop:!1}},mounted:function(){this.loadData()},activated:function(){var e=this;this.$nextTick((function(){e.$refs.plTable.doLayout()}))},watch:{"formData.warehouseId":function(){this.checkStore&&this.getLogicWarehouse(),this.checkStore=!0},"formData.ownerId":function(){this.checkShop&&this.selOwner(),this.checkShop=!0}},methods:{loadData:function(){var t=this;this.loading=!0,Object(o["a"])(this.searchData).then((function(a){a&&(t.loading=!1,t.dataList=a.msgData.list.items,t.total=a.msgData.list.total,t.storeArr=a.msgData.data.warehouses,t.ownerArr=a.msgData.data.owners,t.jsHeight=window.innerHeight-e(".head-container").outerHeight()-160)}))},search:function(){this.page=1,this.loadData()},addForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(o["d"])(t.formData).then((function(e){e&&(t.formIsshow=!1,t.$modal.notifySuccess(e.errMsg))}))}))},editStaff:function(e){var t=this;void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData.logicWarehouseId=JSON.parse(JSON.stringify(e.logicWarehouseId)),this.formData.userId=JSON.parse(JSON.stringify(e.userId)),this.formData.warehouseId=JSON.parse(JSON.stringify(e.warehouseId)),this.formData.ownerId=JSON.parse(JSON.stringify(e.ownerId)),this.formData.shopId=JSON.parse(JSON.stringify(e.shopId)),this.editStatus=!0,this.formIsshow=!0,e.logicWarehouseId.length>0?(this.checkStore=!1,this.checkShop=!1):(this.checkStore=!0,this.checkShop=!0),0!==this.formData.ownerId.length?0!==this.formData.warehouseId.length?(Object(o["b"])({warehouseId:this.formData.warehouseId,accessToken:sessionStorage.getItem("xn_token")}).then((function(e){e&&(t.logicWarehouses=e.msgData.logicWarehouses)})),Object(o["c"])({ownerId:this.formData.ownerId,accessToken:sessionStorage.getItem("xn_token")}).then((function(e){e&&(t.shopArr=e.msgData.shops)}))):this.logicWarehouses=[]:this.shopArr=[]},selOwner:function(){var e=this;if(0===this.formData.ownerId.length)return this.shopArr=[],void(this.formData.shopId=[]);Object(o["c"])({ownerId:this.formData.ownerId,accessToken:sessionStorage.getItem("xn_token")}).then((function(t){t&&(e.formData.shopId=[],e.shopArr=t.msgData.shops)}))},getLogicWarehouse:function(){var e=this;if(0===this.formData.warehouseId.length)return this.logicWarehouses=[],void(this.formData.logicWarehouseId=[]);Object(o["b"])({warehouseId:this.formData.warehouseId,accessToken:sessionStorage.getItem("xn_token")}).then((function(t){t&&(e.formData.logicWarehouseId=[],e.logicWarehouses=t.msgData.logicWarehouses)}))}}}}).call(this,a("1157"))},de55:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("div",{staticClass:"head-container"},[a("div",{staticStyle:{"margin-left":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入账号搜索"},model:{value:e.searchData.userId,callback:function(t){e.$set(e.searchData,"userId",t)},expression:"searchData.userId"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入用户名搜索"},model:{value:e.searchData.userName,callback:function(t){e.$set(e.searchData,"userName",t)},expression:"searchData.userName"}}),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),a("el-col",[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"plTable",attrs:{data:e.dataList,height:e.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"userAccount",label:"账号"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"userName",label:"用户名"}}),a("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["User:Isolate:Edit"],expression:"['User:Isolate:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-coin"},on:{click:function(a){return e.editStaff(t.row)}}},[e._v("数据权限")])]}}])})],1),a("pagination",{attrs:{limit:e.searchData.limit,page:e.searchData.page,total:e.total,"page-sizes":e.pageSizes},on:{"update:limit":function(t){return e.$set(e.searchData,"limit",t)},"update:page":function(t){return e.$set(e.searchData,"page",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.loadData}})],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:e.formIsshow,title:e.titleContent,width:"600px"},on:{"update:visible":function(t){e.formIsshow=t}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:e.formData,rules:e.rules,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"物理仓",prop:"warehouseId"}},[a("SelectToolbar",{staticStyle:{width:"450px"},attrs:{filterable:!1,isfilte:!0,fiftervalue:e.formData.warehouseId,bindId:"warehouseId",bindName:"warehouseName",fifteroptions:e.storeArr},model:{value:e.formData.warehouseId,callback:function(t){e.$set(e.formData,"warehouseId",t)},expression:"formData.warehouseId"}})],1),a("el-form-item",{attrs:{label:"逻辑仓",prop:"logicWarehouseId"}},[a("SelectToolbar",{staticStyle:{width:"450px"},attrs:{filterable:!1,isfilte:!0,fiftervalue:e.formData.logicWarehouseId,bindId:"logicWarehouseId",bindName:"logicWarehouseName",fifteroptions:e.logicWarehouses},model:{value:e.formData.logicWarehouseId,callback:function(t){e.$set(e.formData,"logicWarehouseId",t)},expression:"formData.logicWarehouseId"}})],1),a("el-form-item",{attrs:{label:"货主权限",prop:"ownerId"}},[a("SelectToolbar",{staticStyle:{width:"450px"},attrs:{filterable:!1,isfilte:!0,fiftervalue:e.formData.ownerId,bindId:"ownerId",bindName:"ownerName",fifteroptions:e.ownerArr},model:{value:e.formData.ownerId,callback:function(t){e.$set(e.formData,"ownerId",t)},expression:"formData.ownerId"}})],1),a("el-form-item",{attrs:{label:"店铺权限",prop:"shopId"}},[a("SelectToolbar",{staticStyle:{width:"450px"},attrs:{filterable:!1,isfilte:!0,fiftervalue:e.formData.shopId,bindId:"shopId",bindName:"shopName",fifteroptions:e.shopArr},model:{value:e.formData.shopId,callback:function(t){e.$set(e.formData,"shopId",t)},expression:"formData.shopId"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.formIsshow=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addForm("formData")}}},[e._v("确认")])],1)],1)],1)},s=[],r=a("98cd"),i=r["a"],n=a("2877"),l=Object(n["a"])(i,o,s,!1,null,null,null);t["default"]=l.exports},fe4a:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return n}));var o=a("b775");function s(e){return Object(o["a"])({url:"xnkj/user/isolate/isolateList",method:"post",data:e})}function r(e){return Object(o["a"])({url:"xnkj/user/isolate/getLogicWarehouse",method:"post",data:e})}function i(e){return Object(o["a"])({url:"xnkj/user/isolate/getShop",method:"post",data:e})}function n(e){return Object(o["a"])({url:"xnkj/user/isolate/setIsolate",method:"post",data:e})}}}]);