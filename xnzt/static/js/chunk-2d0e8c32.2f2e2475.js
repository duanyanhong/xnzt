(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8c32"],{"8b3e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("div",{staticClass:"crud-opts"},[a("span",{staticClass:"crud-opts-left"},[t._t("left"),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Goodsfamily:Add"],expression:"['Goods:Goodsfamily:Add']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addShow}},[t._v(" 新增 ")]),a("el-button",{attrs:{type:"info",plain:"",icon:"el-icon-sort",size:"mini"},on:{click:t.toggleExpandAll}},[t._v("展开/折叠 ")]),t._t("right")],2)]),t.refreshTable?a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"plTable",attrs:{data:t.dataList,"use-virtual":"","row-key":"id","row-height":50,"default-expand-all":t.isExpandAll,"tree-props":{children:"children",hasChildren:"hasChildren"},stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"familyName",label:"分类名称"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"createTime",label:"创建时间"}}),a("u-table-column",{attrs:{label:"禁用",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["是"==e.row.disable?a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.disable))]):"否"==e.row.disable?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.disable))]):t._e()]}}],null,!1,2819026386)}),a("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Goodsfamily:Edit"],expression:"['Goods:Goodsfamily:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.editStaff(e.row)}}},[t._v("修改")]),"否"==e.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Goodsfamily:Disable"],expression:"['Goods:Goodsfamily:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定禁用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.editDisable(e)}}},[t._v("确定")])],1),a("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[t._v("禁用")])],1):t._e(),"是"==e.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Goodsfamily:Disable"],expression:"['Goods:Goodsfamily:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定启用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.editDisable(e)}}},[t._v("确定")])],1),a("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[t._v("启用")])],1):t._e()]}}],null,!1,2453469627)})],1):t._e()],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.formIsshow,title:t.titleContent,width:"500px"},on:{"update:visible":function(e){t.formIsshow=e}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:t.formData,rules:t.rules,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"familyPid"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:t.formData.familyPid,callback:function(e){t.$set(t.formData,"familyPid",e)},expression:"formData.familyPid"}},[a("el-option",{attrs:{value:"主类目"}},[t._v("主类目")]),t._l(t.goodsfamily,(function(t){return a("el-option",{key:t.id,attrs:{label:t.familyName,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"分类名称",prop:"familyName"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入分类名称"},model:{value:t.formData.familyName,callback:function(e){t.$set(t.formData,"familyName",e)},expression:"formData.familyName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.formIsshow=!1}}},[t._v("取消")]),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.addForm,expression:"addForm"}],attrs:{type:"primary"}},[t._v("确认")])],1)],1)],1)},i=[],s=a("b775");function l(t){return Object(s["a"])({url:"xnkj/goods/goodsfamily/goodsfamilyList",method:"post",data:t})}function n(t){return Object(s["a"])({url:"xnkj/goods/goodsfamily/editGoodsfamily",method:"post",data:t})}function r(t){return Object(s["a"])({url:"xnkj/goods/goodsfamily/addGoodsfamily",method:"post",data:t})}function d(t){return Object(s["a"])({url:"xnkj/goods/goodsfamily/disableGoodsfamily",method:"post",data:t})}function c(t){return Object(s["a"])({url:"xnkj/goods/goodsfamily/getGoodsfamily",method:"post",data:t})}var f={name:"Goodsfamily",data:function(){return{rules:{familyPid:[{required:!0,message:"请选择",trigger:"change"}],familyName:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},dataList:[],goodsfamily:[],loading:!1,formIsshow:!1,formData:{id:"",familyPid:"",familyName:"",accessToken:sessionStorage.getItem("xn_token")},isExpandAll:!0,refreshTable:!0,editStatus:!1,titleContent:"管理商品分类"}},mounted:function(){this.loadData()},activated:function(){var t=this;this.$nextTick((function(){t.$refs.plTable.doLayout()}))},methods:{loadData:function(){var t=this;this.loading=!0;var e={accessToken:sessionStorage.getItem("xn_token")};l(e).then((function(e){e&&(t.loading=!1,t.dataList=e.msgData.goodsfamily)}))},search:function(){this.page=1,this.loadData()},addShow:function(){var t=this;for(var e in this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=e&&(this.formData[e]="");var a={accessToken:sessionStorage.getItem("xn_token")};c(a).then((function(e){e&&(t.goodsfamily=e.msgData.goodsfamily,t.formIsshow=!0)}))},addForm:function(){var t=this;this.$refs["formData"].validate((function(e){if(!e)return!1;var a=t;a.editStatus?n(a.formData).then((function(t){t&&(a.formIsshow=!1,a.$modal.notifySuccess(t.errMsg),a.loadData())})):r(a.formData).then((function(t){t&&(a.formIsshow=!1,a.$modal.notifySuccess(t.errMsg),a.loadData())}))}))},editStaff:function(t){var e=this;for(var a in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=a&&(this.formData[a]=t[a]),0==t.familyPid&&(this.formData.familyPid="主类目");var o={accessToken:sessionStorage.getItem("xn_token")};c(o).then((function(t){t&&(e.goodsfamily=t.msgData.goodsfamily,e.editStatus=!0,e.formIsshow=!0)}))},toggleExpandAll:function(){var t=this;this.refreshTable=!1,this.isExpandAll=!this.isExpandAll,this.$nextTick((function(){t.refreshTable=!0}))},editDisable:function(t){var e=this;this.$refs["popover-".concat(t.$index)].doClose();var a={id:t.row.id,accessToken:sessionStorage.getItem("xn_token")};d(a).then((function(t){t&&(e.$modal.notifySuccess(t.errMsg),e.loadData())}))}}},m=f,u=a("2877"),p=Object(u["a"])(m,o,i,!1,null,null,null);e["default"]=p.exports}}]);