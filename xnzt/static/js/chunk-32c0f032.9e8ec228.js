(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32c0f032"],{4003:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l}));var o=a("b775");function s(e){return Object(o["a"])({url:"xnkj/base/outscope/outscopeList",method:"post",data:e})}function i(e){return Object(o["a"])({url:"xnkj/base/outscope/outscopeMatch",method:"post",data:e})}function r(e){return Object(o["a"])({url:"xnkj/base/outscope/deleteOutscope",method:"post",data:e})}function n(e){return Object(o["a"])({url:"xnkj/base/outscope/getProvince",method:"post",data:e})}function c(e){return Object(o["a"])({url:"xnkj/base/outscope/getCity",method:"post",data:e})}function l(e){return Object(o["a"])({url:"xnkj/base/outscope/getArea",method:"post",data:e})}},"5bc4":function(e,t,a){"use strict";(function(e){a("14d9");var o=a("4003");t["a"]={name:"Outscope",data:function(){return{rules:{provinceId:[{required:!0,message:"请选择",trigger:"change"}],cityId:[{required:!0,message:"请选择",trigger:"change"}],scopeAreaId:[{required:!0,message:"请选择",trigger:"change"}]},searchData:{provinceName:"",cityName:"",areaName:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],provinces:[],citys:[],areas:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",provinceId:"",cityId:"",scopeAreaId:"",accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,ids:[]}},mounted:function(){this.loadData()},activated:function(){var e=this;this.$nextTick((function(){e.$refs.plTable.doLayout()}))},methods:{loadData:function(){var t=this;this.loading=!0,Object(o["d"])(this.searchData).then((function(a){a&&(t.loading=!1,t.dataList=a.msgData.list.items,t.total=a.msgData.list.total,t.jsHeight=window.innerHeight-e(".head-container").outerHeight()-e(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},handleSelectionChange:function(e){this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(e[t].id)},addShow:function(){var e=this;if(this.ids.length<1)this.$modal.notifyWarning("请选择要操作数据！");else{for(var t in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=t&&(this.formData[t]="");var a={accessToken:sessionStorage.getItem("xn_token")};Object(o["e"])(a).then((function(t){t&&(e.provinces=t.msgData.provinces,e.citys=[],e.areas=[],e.formIsshow=!0)}))}},addForm:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;var a={accessToken:sessionStorage.getItem("xn_token"),platformAreaId:e.ids,scopeAreaId:e.formData.scopeAreaId},s=e;Object(o["f"])(a).then((function(e){e&&(s.formIsshow=!1,s.$modal.notifySuccess(e.errMsg),s.loadData())}))}))},getCity:function(){var e=this,t={accessToken:sessionStorage.getItem("xn_token"),provinceId:this.formData.provinceId};this.formData.cityId="",this.formData.scopeAreaId="",Object(o["c"])(t).then((function(t){t&&(e.citys=t.msgData.cities,e.areas=[])}))},getArea:function(){var e=this,t={accessToken:sessionStorage.getItem("xn_token"),cityId:this.formData.cityId};this.formData.scopeAreaId="",Object(o["b"])(t).then((function(t){t&&(e.areas=t.msgData.areas)}))},deleteOutscope:function(e){var t=this;this.$refs["popovers-".concat(e.$index)].doClose();var a={id:e.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(o["a"])(a).then((function(e){e&&(t.$modal.notifySuccess(e.errMsg),t.loadData())}))}}}}).call(this,a("1157"))},"8d37":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("div",{staticClass:"head-container"},[a("div",[a("el-input",{staticClass:"order-input",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入省搜索"},model:{value:e.searchData.provinceName,callback:function(t){e.$set(e.searchData,"provinceName",t)},expression:"searchData.provinceName"}}),a("el-input",{staticClass:"order-input",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入市搜索"},model:{value:e.searchData.cityName,callback:function(t){e.$set(e.searchData,"cityName",t)},expression:"searchData.cityName"}}),a("el-input",{staticClass:"order-input",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入区搜索"},model:{value:e.searchData.areaName,callback:function(t){e.$set(e.searchData,"areaName",t)},expression:"searchData.areaName"}}),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),a("div",{staticClass:"crud-opts"},[a("span",{staticClass:"crud-opts-left"},[e._t("left"),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Outscope:Match"],expression:"['Base:Outscope:Match']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-connection",plain:""},on:{click:e.addShow}},[e._v(" 映射 ")]),e._t("right")],2)]),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"plTable",attrs:{data:e.dataList,height:e.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"platformName",label:"平台"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"provinceName",label:"省"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"cityName",label:"市"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"areaName",label:"区"}}),a("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Outscope:Delete"],expression:"['Base:Outscope:Delete']"}],ref:"popovers-"+t.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定删除吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs["popovers-"+t.$index].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.deleteOutscope(t)}}},[e._v("确定")])],1),a("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-delete",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("pagination",{attrs:{limit:e.searchData.limit,page:e.searchData.page,total:e.total,"page-sizes":e.pageSizes},on:{"update:limit":function(t){return e.$set(e.searchData,"limit",t)},"update:page":function(t){return e.$set(e.searchData,"page",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.loadData}})],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:e.formIsshow,title:"地址映射",width:"500px"},on:{"update:visible":function(t){e.formIsshow=t}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:e.formData,rules:e.rules,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"省份",prop:"provinceId"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.getCity},model:{value:e.formData.provinceId,callback:function(t){e.$set(e.formData,"provinceId",t)},expression:"formData.provinceId"}},e._l(e.provinces,(function(e){return a("el-option",{key:e.provinceId,attrs:{label:e.provinceName,value:e.provinceId}})})),1)],1),a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.getArea},model:{value:e.formData.cityId,callback:function(t){e.$set(e.formData,"cityId",t)},expression:"formData.cityId"}},e._l(e.citys,(function(e){return a("el-option",{key:e.cityId,attrs:{label:e.cityName,value:e.cityId}})})),1)],1),a("el-form-item",{attrs:{label:"区域",prop:"scopeAreaId"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.formData.scopeAreaId,callback:function(t){e.$set(e.formData,"scopeAreaId",t)},expression:"formData.scopeAreaId"}},e._l(e.areas,(function(e){return a("el-option",{key:e.acopeAreaId,attrs:{label:e.areaName,value:e.acopeAreaId}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.formIsshow=!1}}},[e._v("取消")]),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.addForm,expression:"addForm"}],attrs:{type:"primary"}},[e._v("确认")])],1)],1)],1)},s=[],i=a("5bc4"),r=i["a"],n=a("2877"),c=Object(n["a"])(r,o,s,!1,null,null,null);t["default"]=c.exports}}]);