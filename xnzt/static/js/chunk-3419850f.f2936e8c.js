(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3419850f"],{"4bb4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",[s("div",{staticClass:"head-container"},[s("div",[s("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入erp物流编码搜索"},model:{value:t.searchData.erplogisticsCode,callback:function(e){t.$set(t.searchData,"erplogisticsCode",e)},expression:"searchData.erplogisticsCode"}}),s("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)]),s("div",{staticClass:"crud-opts"},[s("span",{staticClass:"crud-opts-left"},[t._t("left"),s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Add"],expression:"['Base:Erplogistics:Add']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addShow}},[t._v(" 新增 ")]),t._t("right")],2),s("span",{staticClass:"crud-opts-left"},[t._t("left"),s("el-upload",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Import"],expression:"['Base:Erplogistics:Import']"}],staticClass:"inline-block",attrs:{"show-file-list":!1,"http-request":t.uploadSuccess,accept:".xlsx,.xls,.csv",action:"#"}},[s("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-upload2",size:"mini"}},[t._v("导入")])],1)],2),s("span",{staticClass:"crud-opts-left"},[s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Export"],expression:"['Base:Erplogistics:Export']"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-download",plain:""},on:{click:t.downMyOrder}},[t._v("导出")])],1)]),s("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"plTable",attrs:{data:t.dataList,height:t.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[s("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"ownerName",label:"货主"}}),s("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"logisticsName",label:"物流"}}),s("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"erplogisticsCode",label:"erp物流编码"}}),s("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"erplogisticsName",label:"erp物流名称"}}),s("u-table-column",{attrs:{label:"禁用",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["是"==e.row.disable?s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.disable))]):"否"==e.row.disable?s("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.disable))]):t._e()]}}])}),s("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Edit"],expression:"['Base:Erplogistics:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(s){return t.editStaff(e.row)}}},[t._v("修改")]),"否"==e.row.disable?s("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Disable"],expression:"['Base:Erplogistics:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[s("p",{staticStyle:{"line-height":"40px"}},[s("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定禁用吗？")]),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.editDisable(e)}}},[t._v("确定")])],1),s("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[t._v("禁用")])],1):t._e(),"是"==e.row.disable?s("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Erplogistics:Disable"],expression:"['Base:Erplogistics:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[s("p",{staticStyle:{"line-height":"40px"}},[s("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定启用吗？")]),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.editDisable(e)}}},[t._v("确定")])],1),s("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[t._v("启用")])],1):t._e()]}}])})],1),s("pagination",{attrs:{limit:t.searchData.limit,page:t.searchData.page,total:t.total,"page-sizes":t.pageSizes},on:{"update:limit":function(e){return t.$set(t.searchData,"limit",e)},"update:page":function(e){return t.$set(t.searchData,"page",e)},"update:pageSizes":function(e){t.pageSizes=e},"update:page-sizes":function(e){t.pageSizes=e},pagination:t.loadData}})],1)],1),s("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.formIsshow,title:t.titleContent,width:"500px"},on:{"update:visible":function(e){t.formIsshow=e}}},[s("el-form",{ref:"formData",attrs:{inline:!0,model:t.formData,rules:t.rules,size:"small","label-width":"150px"}},[s("el-form-item",{attrs:{label:"货主",prop:"ownerId"}},[s("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.formData.ownerId,callback:function(e){t.$set(t.formData,"ownerId",e)},expression:"formData.ownerId"}},t._l(t.owners,(function(t){return s("el-option",{key:t.ownerId,attrs:{label:t.ownerName,value:t.ownerId}})})),1)],1),s("el-form-item",{attrs:{label:"物流",prop:"logisticsId"}},[s("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",filterable:""},model:{value:t.formData.logisticsId,callback:function(e){t.$set(t.formData,"logisticsId",e)},expression:"formData.logisticsId"}},t._l(t.logistics,(function(t){return s("el-option",{key:t.logisticsId,attrs:{label:t.logisticsName,value:t.logisticsId}})})),1)],1),s("el-form-item",{attrs:{label:"erp物流编码",prop:"erplogisticsCode"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入erp物流编码"},model:{value:t.formData.erplogisticsCode,callback:function(e){t.$set(t.formData,"erplogisticsCode",e)},expression:"formData.erplogisticsCode"}})],1),s("el-form-item",{attrs:{label:"erp物流名称",prop:"erplogisticsName"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入erp物流名称"},model:{value:t.formData.erplogisticsName,callback:function(e){t.$set(t.formData,"erplogisticsName",e)},expression:"formData.erplogisticsName"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.formIsshow=!1}}},[t._v("取消")]),s("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.addForm,expression:"addForm"}],attrs:{type:"primary"}},[t._v("确认")])],1)],1)],1)},a=[],o=s("c6d9"),r=o["a"],l=s("2877"),n=Object(l["a"])(r,i,a,!1,null,null,null);e["default"]=n.exports},"5ce8":function(t,e,s){"use strict";s.d(e,"e",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return l})),s.d(e,"f",(function(){return n})),s.d(e,"d",(function(){return c}));var i=s("b775");function a(t){return Object(i["a"])({url:"xnkj/base/erplogistics/erplogisticsList",method:"post",data:t})}function o(t){return Object(i["a"])({url:"xnkj/base/erplogistics/editErplogistics",method:"post",data:t})}function r(t){return Object(i["a"])({url:"xnkj/base/erplogistics/addErplogistics",method:"post",data:t})}function l(t){return Object(i["a"])({url:"xnkj/base/erplogistics/disableErplogistics",method:"post",data:t})}function n(t){return Object(i["a"])({url:"xnkj/base/erplogistics/importErplogistics",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function c(t){return Object(i["a"])({url:"xnkj/base/erplogistics/exportErplogistics",method:"post",data:t})}},c6d9:function(t,e,s){"use strict";(function(t){var i=s("5ce8");e["a"]={name:"Erplogistics",data:function(){return{rules:{erplogisticsCode:[{required:!0,message:"请输入erp物流编码",trigger:"blur"}],erplogisticsName:[{required:!0,message:"请输入erp物流名称",trigger:"blur"}],ownerId:[{required:!0,message:"请选择",trigger:"change"}],logisticsId:[{required:!0,message:"请选择",trigger:"change"}]},searchData:{erplogisticsCode:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],logistics:[],owners:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",ownerId:"",logisticsId:"",erplogisticsCode:"",erplogisticsName:"",accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理ERP物流"}},mounted:function(){this.loadData()},activated:function(){var t=this;this.$nextTick((function(){t.$refs.plTable.doLayout()}))},methods:{loadData:function(){var e=this;this.loading=!0,Object(i["e"])(this.searchData).then((function(s){s&&(e.loading=!1,e.dataList=s.msgData.list.items,e.total=s.msgData.list.total,e.logistics=s.msgData.logistics,e.owners=s.msgData.owners,e.jsHeight=window.innerHeight-t(".head-container").outerHeight()-t(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},addShow:function(){for(var t in this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=t&&(this.formData[t]="");this.formIsshow=!0},addForm:function(){var t=this;this.$refs["formData"].validate((function(e){if(!e)return!1;var s=t;s.editStatus?Object(i["c"])(s.formData).then((function(t){t&&(s.formIsshow=!1,s.$modal.notifySuccess(t.errMsg),s.loadData())})):Object(i["a"])(s.formData).then((function(t){t&&(s.formIsshow=!1,s.$modal.notifySuccess(t.errMsg),s.loadData())}))}))},editStaff:function(t){for(var e in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=e&&(this.formData[e]=t[e]);this.editStatus=!0,this.formIsshow=!0},uploadSuccess:function(t){var e=this;this.loading=!0;var s=new FormData;s.append("file",t.file),s.append("accessToken",sessionStorage.getItem("xn_token")),Object(i["f"])(s).then((function(t){e.loading=!1,t&&(e.$modal.notifySuccess(t.errMsg),void 0!==t.msgData.downloadUrl&&""!==t.msgData.downloadUrl&&(window.location.href=t.msgData.downloadUrl),e.loadData())}))},downMyOrder:function(){var t=this;this.loading=!0,Object(i["d"])(this.searchData).then((function(e){t.loading=!1,e&&(t.$modal.notifySuccess(e.errMsg),void 0!==e.msgData.downloadUrl&&""!==e.msgData.downloadUrl&&(window.location.href=e.msgData.downloadUrl),t.loadData())}))},editDisable:function(t){var e=this;this.$refs["popover-".concat(t.$index)].doClose();var s={id:t.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(i["b"])(s).then((function(t){t&&(e.$modal.notifySuccess(t.errMsg),e.loadData())}))}}}}).call(this,s("1157"))}}]);