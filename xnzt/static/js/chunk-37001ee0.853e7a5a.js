(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37001ee0"],{"43f6":function(e,t,o){"use strict";o.d(t,"g",(function(){return s})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n})),o.d(t,"f",(function(){return l})),o.d(t,"e",(function(){return c})),o.d(t,"h",(function(){return d})),o.d(t,"d",(function(){return u}));var a=o("b775");function s(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/warehousegoodsList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/editWarehousegoods",method:"post",data:e})}function i(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/addWarehousegoods",method:"post",data:e})}function n(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/disableWarehousegoods",method:"post",data:e})}function l(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/getLogicwarehouse",method:"post",data:e})}function c(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/getGoods",method:"post",data:e})}function d(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/importWarehousegoods",method:"post",data:e})}function u(e){return Object(a["a"])({url:"xnkj/goods/warehousegoods/exportWarehousegoods",method:"post",data:e})}},c04a:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",[o("div",{staticClass:"head-container"},[o("div",[o("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入商品编码搜索"},model:{value:e.searchData.lowCode,callback:function(t){e.$set(e.searchData,"lowCode",t)},expression:"searchData.lowCode"}}),o("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),o("div",{staticClass:"crud-opts"},[o("span",{staticClass:"crud-opts-left"},[e._t("left"),o("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Synch"],expression:"['Goods:Warehousegoods:Synch']"}],staticClass:"filter-item",attrs:{size:"mini",type:"danger",icon:"el-icon-refresh",plain:""}},[e._v(" 同步 ")]),e._t("right")],2),o("span",{staticClass:"crud-opts-left"},[e._t("left"),o("el-upload",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Import"],expression:"['Goods:Warehousegoods:Import']"}],staticClass:"inline-block",attrs:{"show-file-list":!1,"http-request":e.uploadSuccess,accept:".xlsx,.xls,.csv",action:"#"}},[o("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-upload2",size:"mini"}},[e._v("导入")])],1)],2),o("span",{staticClass:"crud-opts-left"},[o("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Export"],expression:"['Goods:Warehousegoods:Export']"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-download",plain:""},on:{click:e.downMyOrder}},[e._v("导出")])],1)]),o("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"plTable",attrs:{data:e.dataList,height:e.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}},on:{"selection-change":e.handleSelectionChange}},[o("u-table-column",{attrs:{type:"selection",width:"55"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"warehouseName",label:"物理仓"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"logicwarehouseName",label:"逻辑仓库"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"ownerName",label:"货主"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"itemName",label:"商品名称"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"itemCode",label:"商品编码"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"barCode",label:"商品条码"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lowCode",label:"商品编码(下位)"}}),o("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"className",label:"商品类别"}}),o("u-table-column",{attrs:{label:"禁用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"==t.row.disable?o("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.disable))]):"否"==t.row.disable?o("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.disable))]):e._e()]}}])}),o("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Edit"],expression:"['Goods:Warehousegoods:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(o){return e.editStaff(t.row)}}},[e._v("修改")]),"否"==t.row.disable?o("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Disable"],expression:"['Goods:Warehousegoods:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[o("p",{staticStyle:{"line-height":"40px"}},[o("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定禁用吗？")]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.editDisable(t)}}},[e._v("确定")])],1),o("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[e._v("禁用")])],1):e._e(),"是"==t.row.disable?o("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Goods:Warehousegoods:Disable"],expression:"['Goods:Warehousegoods:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[o("p",{staticStyle:{"line-height":"40px"}},[o("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定启用吗？")]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.editDisable(t)}}},[e._v("确定")])],1),o("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[e._v("启用")])],1):e._e()]}}])})],1),o("pagination",{attrs:{limit:e.searchData.limit,page:e.searchData.page,total:e.total,"page-sizes":e.pageSizes},on:{"update:limit":function(t){return e.$set(e.searchData,"limit",t)},"update:page":function(t){return e.$set(e.searchData,"page",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.loadData}})],1)],1),o("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:e.formIsshow,title:e.titleContent,width:"750px"},on:{"update:visible":function(t){e.formIsshow=t}}},[o("el-form",{ref:"formData",attrs:{inline:!0,model:e.formData,rules:e.rules,size:"small","label-width":"150px"}},[o("el-form-item",{attrs:{label:"物理仓",prop:"warehouseId"}},[o("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.getLogicwarehouse},model:{value:e.formData.warehouseId,callback:function(t){e.$set(e.formData,"warehouseId",t)},expression:"formData.warehouseId"}},e._l(e.warehouses,(function(e){return o("el-option",{key:e.warehouseId,attrs:{label:e.warehouseName,value:e.warehouseId}})})),1)],1),o("el-form-item",{attrs:{label:"逻辑仓库",prop:"logicwarehouseId"}},[o("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.formData.logicwarehouseId,callback:function(t){e.$set(e.formData,"logicwarehouseId",t)},expression:"formData.logicwarehouseId"}},e._l(e.logicwarehouses,(function(e){return o("el-option",{key:e.logicwarehouseId,attrs:{label:e.logicwarehouseName,value:e.logicwarehouseId}})})),1)],1),o("el-form-item",{attrs:{label:"货主",prop:"ownerId"}},[o("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.getGoods},model:{value:e.formData.ownerId,callback:function(t){e.$set(e.formData,"ownerId",t)},expression:"formData.ownerId"}},e._l(e.owners,(function(e){return o("el-option",{key:e.ownerId,attrs:{label:e.ownerName,value:e.ownerId}})})),1)],1),o("el-form-item",{attrs:{label:"商品",prop:"goodsId"}},[o("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.formData.goodsId,callback:function(t){e.$set(e.formData,"goodsId",t)},expression:"formData.goodsId"}},e._l(e.goods,(function(e){return o("el-option",{key:e.goodsId,attrs:{label:e.itemName,value:e.goodsId}})})),1)],1),o("el-form-item",{attrs:{label:"商品编码(下位)",prop:"lowCode"}},[o("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入商品编码(下位)"},model:{value:e.formData.lowCode,callback:function(t){e.$set(e.formData,"lowCode",t)},expression:"formData.lowCode"}})],1),o("el-form-item",{attrs:{label:"类别",prop:"className"}},[o("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:e.formData.className,callback:function(t){e.$set(e.formData,"className",t)},expression:"formData.className"}},[o("el-option",{attrs:{value:"A类",label:"A类"}}),o("el-option",{attrs:{value:"B类",label:"B类"}}),o("el-option",{attrs:{value:"C类",label:"C类"}})],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"text"},on:{click:function(t){e.formIsshow=!1}}},[e._v("取消")]),o("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.addForm,expression:"addForm"}],attrs:{type:"primary"}},[e._v("确认")])],1)],1)],1)},s=[],r=o("ee98"),i=r["a"],n=o("2877"),l=Object(n["a"])(i,a,s,!1,null,null,null);t["default"]=l.exports},ee98:function(e,t,o){"use strict";(function(e){o("14d9");var a=o("43f6");t["a"]={name:"Warehousegoods",data:function(){return{rules:{logicwarehouseId:[{required:!0,message:"请选择",trigger:"change"}],warehouseId:[{required:!0,message:"请选择",trigger:"change"}],className:[{required:!0,message:"请选择",trigger:"change"}],goodsId:[{required:!0,message:"请选择",trigger:"change"}],ownerId:[{required:!0,message:"请选择",trigger:"change"}]},searchData:{lowCode:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",logicwarehouseId:"",warehouseId:"",goodsId:"",ownerId:"",className:"",lowCode:"",accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理仓库商品",logicwarehouses:[],warehouses:[],goods:[],owners:[],ids:[]}},mounted:function(){this.loadData()},activated:function(){var e=this;this.$nextTick((function(){e.$refs.plTable.doLayout()}))},methods:{loadData:function(){var t=this;this.loading=!0,Object(a["g"])(this.searchData).then((function(o){o&&(t.loading=!1,t.dataList=o.msgData.list.items,t.total=o.msgData.list.total,t.warehouses=o.msgData.warehouses,t.owners=o.msgData.owners,t.jsHeight=window.innerHeight-e(".head-container").outerHeight()-e(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},handleSelectionChange:function(e){this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(e[t].id)},addShow:function(){for(var e in this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=e&&(this.formData[e]="");this.logicwarehouses=[],this.formIsshow=!0},addForm:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;var o=e;o.editStatus?Object(a["c"])(o.formData).then((function(e){e&&(o.formIsshow=!1,o.$modal.notifySuccess(e.errMsg),o.loadData())})):Object(a["a"])(o.formData).then((function(e){e&&(o.formIsshow=!1,o.$modal.notifySuccess(e.errMsg),o.loadData())}))}))},editStaff:function(e){var t=this;for(var o in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=o&&(this.formData[o]=e[o]);this.logicwarehouses=[];var s={warehouseId:this.formData.warehouseId,accessToken:sessionStorage.getItem("xn_token")};Object(a["f"])(s).then((function(e){e&&(t.logicwarehouses=e.msgData.logicwarehouses)})),this.goods=[];var r={ownerId:this.formData.ownerId,accessToken:sessionStorage.getItem("xn_token")};Object(a["e"])(r).then((function(e){e&&(t.goods=e.msgData.goods)})),this.editStatus=!0,this.formIsshow=!0},editDisable:function(e){var t=this;this.$refs["popover-".concat(e.$index)].doClose();var o={id:e.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(a["b"])(o).then((function(e){e&&(t.$modal.notifySuccess(e.errMsg),t.loadData())}))},uploadSuccess:function(e){var t=this;this.loading=!0;var o=new FormData;o.append("file",e.file),o.append("accessToken",sessionStorage.getItem("xn_token")),Object(a["h"])(o).then((function(e){t.loading=!1,e&&(t.$modal.notifySuccess(e.errMsg),void 0!==e.msgData.downloadUrl&&""!==e.msgData.downloadUrl&&(window.location.href=e.msgData.downloadUrl),t.loadData())}))},downMyOrder:function(){var e=this;this.loading=!0,Object(a["d"])(this.searchData).then((function(t){e.loading=!1,t&&(e.$modal.notifySuccess(t.errMsg),void 0!==t.msgData.downloadUrl&&""!==t.msgData.downloadUrl&&(window.location.href=t.msgData.downloadUrl),e.loadData())}))},getLogicwarehouse:function(){var e=this;this.formData.logicwarehouseId="",this.logicwarehouses=[];var t={warehouseId:this.formData.warehouseId,accessToken:sessionStorage.getItem("xn_token")};Object(a["f"])(t).then((function(t){t&&(e.logicwarehouses=t.msgData.logicwarehouses)}))},getGoods:function(){var e=this;this.formData.goodsId="",this.goods=[];var t={ownerId:this.formData.ownerId,accessToken:sessionStorage.getItem("xn_token")};Object(a["e"])(t).then((function(t){t&&(e.goods=t.msgData.goods)}))}}}}).call(this,o("1157"))}}]);