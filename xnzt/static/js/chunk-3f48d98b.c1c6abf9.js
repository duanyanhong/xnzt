(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f48d98b"],{"1c59":function(e,t,a){"use strict";var i=a("6d61"),n=a("6566");i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},"4fad":function(e,t,a){var i=a("d039"),n=a("861d"),r=a("c6b6"),s=a("d86b"),o=Object.isExtensible,c=i((function(){o(1)}));e.exports=c||s?function(e){return!!n(e)&&((!s||"ArrayBuffer"!=r(e))&&(!o||o(e)))}:o},6062:function(e,t,a){a("1c59")},6566:function(e,t,a){"use strict";var i=a("9bf2").f,n=a("7c73"),r=a("6964"),s=a("0366"),o=a("19aa"),c=a("7234"),l=a("2266"),u=a("c6d2"),d=a("4754"),f=a("2626"),p=a("83ab"),m=a("f183").fastKey,h=a("69f3"),v=h.set,b=h.getterFor;e.exports={getConstructor:function(e,t,a,u){var d=e((function(e,i){o(e,f),v(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),p||(e.size=0),c(i)||l(i,e[u],{that:e,AS_ENTRIES:a})})),f=d.prototype,h=b(t),x=function(e,t,a){var i,n,r=h(e),s=g(e,t);return s?s.value=a:(r.last=s={index:n=m(t,!0),key:t,value:a,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=s),i&&(i.next=s),p?r.size++:e.size++,"F"!==n&&(r.index[n]=s)),e},g=function(e,t){var a,i=h(e),n=m(t);if("F"!==n)return i.index[n];for(a=i.first;a;a=a.next)if(a.key==t)return a};return r(f,{clear:function(){var e=this,t=h(e),a=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete a[i.index],i=i.next;t.first=t.last=void 0,p?t.size=0:e.size=0},delete:function(e){var t=this,a=h(t),i=g(t,e);if(i){var n=i.next,r=i.previous;delete a.index[i.index],i.removed=!0,r&&(r.next=n),n&&(n.previous=r),a.first==i&&(a.first=n),a.last==i&&(a.last=r),p?a.size--:t.size--}return!!i},forEach:function(e){var t,a=h(this),i=s(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:a.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),r(f,a?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return x(this,0===e?0:e,t)}}:{add:function(e){return x(this,e=0===e?0:e,e)}}),p&&i(f,"size",{get:function(){return h(this).size}}),d},setStrong:function(e,t,a){var i=t+" Iterator",n=b(t),r=b(i);u(e,t,(function(e,t){v(this,{type:i,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?d("keys"==t?a.key:"values"==t?a.value:[a.key,a.value],!1):(e.target=void 0,d(void 0,!0))}),a?"entries":"values",!a,!0),f(t)}}},6964:function(e,t,a){var i=a("cb2d");e.exports=function(e,t,a){for(var n in t)i(e,n,t[n],a);return e}},"6d61":function(e,t,a){"use strict";var i=a("23e7"),n=a("da84"),r=a("e330"),s=a("94ca"),o=a("cb2d"),c=a("f183"),l=a("2266"),u=a("19aa"),d=a("1626"),f=a("7234"),p=a("861d"),m=a("d039"),h=a("1c7e"),v=a("d44e"),b=a("7156");e.exports=function(e,t,a){var x=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),w=x?"set":"add",y=n[e],D=y&&y.prototype,S=y,k={},_=function(e){var t=r(D[e]);o(D,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return g&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!p(e))&&t(this,0===e?0:e)}:function(e,a){return t(this,0===e?0:e,a),this})},z=s(e,!d(y)||!(g||D.forEach&&!m((function(){(new y).entries().next()}))));if(z)S=a.getConstructor(t,e,x,w),c.enable();else if(s(e,!0)){var $=new S,C=$[w](g?{}:-0,1)!=$,E=m((function(){$.has(1)})),I=h((function(e){new y(e)})),j=!g&&m((function(){var e=new y,t=5;while(t--)e[w](t,t);return!e.has(-0)}));I||(S=t((function(e,t){u(e,D);var a=b(new y,e,S);return f(t)||l(t,a[w],{that:a,AS_ENTRIES:x}),a})),S.prototype=D,D.constructor=S),(E||j)&&(_("delete"),_("has"),x&&_("get")),(j||C)&&_(w),g&&D.clear&&delete D.clear}return k[e]=S,i({global:!0,constructor:!0,forced:S!=y},k),v(S,e),g||a.setStrong(S,e,x),S}},a5f2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("div",{staticClass:"head-container"},[a("div",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入流程编码搜索"},model:{value:e.searchData.examineCode,callback:function(t){e.$set(e.searchData,"examineCode",t)},expression:"searchData.examineCode"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入流程名称搜索"},model:{value:e.searchData.examineName,callback:function(t){e.$set(e.searchData,"examineName",t)},expression:"searchData.examineName"}}),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),a("div",{staticClass:"crud-opts"},[a("span",{staticClass:"crud-opts-left"},[e._t("left"),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Examine:Add"],expression:"['Base:Examine:Add']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:e.addShow}},[e._v(" 新增 ")]),e._t("right")],2)]),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"plTable",attrs:{data:e.dataList,height:e.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"examineCode",label:"流程编码"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"examineName",label:"流程名称"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"examineQueue",label:"流程节点"}}),a("u-table-column",{attrs:{label:"禁用",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"==t.row.disable?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.disable))]):"否"==t.row.disable?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.disable))]):e._e()]}}])}),a("u-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Examine:Edit"],expression:"['Base:Examine:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editStaff(t.row)}}},[e._v("修改")]),"否"==t.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Examine:Disable"],expression:"['Base:Examine:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定禁用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editDisable(t)}}},[e._v("确定")])],1),a("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[e._v("禁用")])],1):e._e(),"是"==t.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Examine:Disable"],expression:"['Base:Examine:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定启用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editDisable(t)}}},[e._v("确定")])],1),a("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[e._v("启用")])],1):e._e()]}}])})],1),a("pagination",{attrs:{limit:e.searchData.limit,page:e.searchData.page,total:e.total,"page-sizes":e.pageSizes},on:{"update:limit":function(t){return e.$set(e.searchData,"limit",t)},"update:page":function(t){return e.$set(e.searchData,"page",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.loadData}})],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:e.formIsshow,title:e.titleContent,width:"600px"},on:{"update:visible":function(t){e.formIsshow=t}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:e.formData,rules:e.rules,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"流程编码",prop:"examineCode"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入流程编码"},model:{value:e.formData.examineCode,callback:function(t){e.$set(e.formData,"examineCode",t)},expression:"formData.examineCode"}})],1),a("el-form-item",{attrs:{label:"流程名称",prop:"examineName"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入流程名称"},model:{value:e.formData.examineName,callback:function(t){e.$set(e.formData,"examineName",t)},expression:"formData.examineName"}})],1)],1),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"审单流程"}},[a("div",[a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addShowExamine}},[e._v(" 添加节点 ")])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.formData.process,"max-height":"350",border:""}},[a("el-table-column",{attrs:{label:"审单节点",width:"270",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{on:{change:function(a){return e.changeRrocess(t.row,t.$index)}},model:{value:t.row.processId,callback:function(a){e.$set(t.row,"processId",a)},expression:"scope.row.processId"}},e._l(e.processList,(function(e){return a("el-option",{key:e.processId,attrs:{label:e.processName,value:e.processId}})})),1)]}}])}),a("el-table-column",{attrs:{label:"排序",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"disabled",placeholder:"请输入"},model:{value:t.row.processSort,callback:function(a){e.$set(t.row,"processSort",a)},expression:"scope.row.processSort"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.addDel(t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.formIsshow=!1}}},[e._v("取消")]),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.addForm,expression:"addForm"}],attrs:{type:"primary"}},[e._v("确认")])],1)],1)],1)},n=[],r=a("da78"),s=r["a"],o=a("2877"),c=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=c.exports},bb2f:function(e,t,a){var i=a("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c195:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var i=a("b775");function n(e){return Object(i["a"])({url:"xnkj/base/examine/examineList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"xnkj/base/examine/editExamine",method:"post",data:e})}function s(e){return Object(i["a"])({url:"xnkj/base/examine/addExamine",method:"post",data:e})}function o(e){return Object(i["a"])({url:"xnkj/base/examine/disableExamine",method:"post",data:e})}},d86b:function(e,t,a){var i=a("d039");e.exports=i((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},da78:function(e,t,a){"use strict";(function(e){a("a630"),a("14d9"),a("a434"),a("e9c4"),a("b64b"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0");var i=a("c195");t["a"]={name:"Examine",data:function(){return{rules:{examineCode:[{required:!0,message:"请输入流程编码",trigger:"blur"}],examineName:[{required:!0,message:"请输入流程名称",trigger:"blur"}]},searchData:{examineCode:"",examineName:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",examineCode:"",examineName:"",process:[],accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理审单流程",ownerList:[],processList:[]}},mounted:function(){this.loadData()},activated:function(){var e=this;this.$nextTick((function(){e.$refs.plTable.doLayout()}))},methods:{loadData:function(){var t=this;this.loading=!0,Object(i["d"])(this.searchData).then((function(a){a&&(t.loading=!1,t.dataList=a.msgData.list.items,t.total=a.msgData.list.total,t.processList=a.msgData.process,t.jsHeight=window.innerHeight-e(".head-container").outerHeight()-e(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},addShow:function(){for(var e in this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=e&&"process"!=e&&(this.formData[e]="");this.formData.process=[],this.formIsshow=!0},addForm:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;var a=e;if(a.formData.process.length<1)e.$modal.notifyWarning("请添加流程节点！");else{for(var n=0;n<a.formData.process.length;n++)if(""==a.formData.process[n].processId)return void a.$modal.notifyWarning("流程节点不能为空！");var r=a.duplicates(a.formData.process);r.length>0?a.$modal.notifyWarning("流程节点不能重复！"):a.editStatus?Object(i["c"])(a.formData).then((function(e){e&&(a.formIsshow=!1,a.$modal.notifySuccess(e.errMsg),a.loadData())})):Object(i["a"])(a.formData).then((function(e){e&&(a.formIsshow=!1,a.$modal.notifySuccess(e.errMsg),a.loadData())}))}}))},duplicates:function(e){var t=new Set,a=new Set;return e.forEach((function(e){t.has(e.processId)?a.add(e.processId):t.add(e.processId)})),Array.from(a)},editStaff:function(e){for(var t in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=t&&(this.formData[t]=JSON.parse(JSON.stringify(e[t])));this.editStatus=!0,this.formIsshow=!0},editDisable:function(e){var t=this;this.$refs["popover-".concat(e.$index)].doClose();var a={id:e.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(i["b"])(a).then((function(e){e&&(t.$modal.notifySuccess(e.errMsg),t.loadData())}))},addShowExamine:function(){this.formData.process.push({processId:"",processSort:""});for(var e=0;e<this.formData.process.length;e++)this.formData.process[e]["processSort"]=e+1},addDel:function(e){this.formData.process.splice(e,1);for(var t=0;t<this.formData.process.length;t++)this.formData.process[t]["processSort"]=t+1},changeRrocess:function(){}}}}).call(this,a("1157"))},f183:function(e,t,a){var i=a("23e7"),n=a("e330"),r=a("d012"),s=a("861d"),o=a("1a2d"),c=a("9bf2").f,l=a("241c"),u=a("057f"),d=a("4fad"),f=a("90e3"),p=a("bb2f"),m=!1,h=f("meta"),v=0,b=function(e){c(e,h,{value:{objectID:"O"+v++,weakData:{}}})},x=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,h)){if(!d(e))return"F";if(!t)return"E";b(e)}return e[h].objectID},g=function(e,t){if(!o(e,h)){if(!d(e))return!0;if(!t)return!1;b(e)}return e[h].weakData},w=function(e){return p&&m&&d(e)&&!o(e,h)&&b(e),e},y=function(){D.enable=function(){},m=!0;var e=l.f,t=n([].splice),a={};a[h]=1,e(a).length&&(l.f=function(a){for(var i=e(a),n=0,r=i.length;n<r;n++)if(i[n]===h){t(i,n,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},D=e.exports={enable:y,fastKey:x,getWeakData:g,onFreeze:w};r[h]=!0}}]);