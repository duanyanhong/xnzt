(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44be76ce"],{"00f6":function(t,e,a){"use strict";(function(t){var o=a("efb6");e["a"]={name:"Site",data:function(){return{rules:{carrierId:[{required:!0,message:"请选择",trigger:"change"}],assignSwitch:[{required:!0,message:"请选择",trigger:"change"}],siteType:[{required:!0,message:"请选择",trigger:"change"}],siteGrade:[{required:!0,message:"请选择",trigger:"change"}],siteCode:[{required:!0,message:"请输入门店编码",trigger:"blur"}],siteName:[{required:!0,message:"请输入门店名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactMobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],province:[{required:!0,message:"请输入省",trigger:"blur"}],city:[{required:!0,message:"请输入市",trigger:"blur"}],area:[{required:!0,message:"请输入区/县",trigger:"blur"}],detailAddress:[{required:!0,message:"请输入详细地址",trigger:"blur"}],assignLimit:[{required:!0,message:"请输入配送上限",trigger:"blur"}],stockLimit:[{required:!0,message:"请输入存货上限",trigger:"blur"}]},searchData:{siteCode:"",siteName:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",carrierId:"",siteCode:"",siteName:"",contactName:"",contactMobile:"",province:"",city:"",area:"",town:"",detailAddress:"",lng:"",lat:"",assignSwitch:"",assignLimit:"",stockLimit:"",siteType:"",siteGrade:"",siteExtent:"",openTime:"",closeTime:"",accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理门店信息",carrier:[]}},mounted:function(){this.loadData()},activated:function(){var t=this;this.$nextTick((function(){t.$refs.plTable.doLayout()}))},methods:{loadData:function(){var e=this;this.loading=!0,Object(o["e"])(this.searchData).then((function(a){a&&(e.loading=!1,e.dataList=a.msgData.list.items,e.total=a.msgData.list.total,e.carrier=a.msgData.carriers,e.jsHeight=window.innerHeight-t(".head-container").outerHeight()-t(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},addShow:function(){for(var t in this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=t&&(this.formData[t]="");this.formIsshow=!0},addForm:function(){var t=this;this.$refs["formData"].validate((function(e){if(!e)return!1;var a=t;a.editStatus?Object(o["c"])(a.formData).then((function(t){t&&(a.formIsshow=!1,a.$modal.notifySuccess(t.errMsg),a.loadData())})):Object(o["a"])(a.formData).then((function(t){t&&(a.formIsshow=!1,a.$modal.notifySuccess(t.errMsg),a.loadData())}))}))},editStaff:function(t){for(var e in void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.formData)"accessToken"!=e&&(this.formData[e]=t[e]);this.editStatus=!0,this.formIsshow=!0},uploadSuccess:function(t){var e=this;this.loading=!0;var a=new FormData;a.append("file",t.file),a.append("accessToken",sessionStorage.getItem("xn_token")),Object(o["f"])(a).then((function(t){e.loading=!1,t&&(e.$modal.notifySuccess(t.errMsg),void 0!==t.msgData.downloadUrl&&""!==t.msgData.downloadUrl&&(window.location.href=t.msgData.downloadUrl),e.loadData())}))},downMyOrder:function(){var t=this;this.loading=!0,Object(o["d"])(this.searchData).then((function(e){t.loading=!1,e&&(t.$modal.notifySuccess(e.errMsg),void 0!==e.msgData.downloadUrl&&""!==e.msgData.downloadUrl&&(window.location.href=e.msgData.downloadUrl),t.loadData())}))},editDisable:function(t){var e=this;this.$refs["popover-".concat(t.$index)].doClose();var a={id:t.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(o["b"])(a).then((function(t){t&&(e.$modal.notifySuccess(t.errMsg),e.loadData())}))}}}}).call(this,a("1157"))},8831:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("div",{staticClass:"head-container"},[a("div",[a("el-input",{staticClass:"order-input",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入门店编码搜索"},model:{value:t.searchData.siteCode,callback:function(e){t.$set(t.searchData,"siteCode",e)},expression:"searchData.siteCode"}}),a("el-input",{staticClass:"order-input",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入门店名称搜索"},model:{value:t.searchData.siteName,callback:function(e){t.$set(t.searchData,"siteName",e)},expression:"searchData.siteName"}}),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)]),a("div",{staticClass:"crud-opts"},[a("span",{staticClass:"crud-opts-left"},[t._t("left"),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Add"],expression:"['Base:Site:Add']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addShow}},[t._v(" 新增 ")]),t._t("right")],2),a("span",{staticClass:"crud-opts-left"},[t._t("left"),a("el-upload",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Import"],expression:"['Base:Site:Import']"}],staticClass:"inline-block",attrs:{"show-file-list":!1,"http-request":t.uploadSuccess,accept:".xlsx,.xls,.csv",action:"#"}},[a("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-upload2",size:"mini"}},[t._v("导入")])],1)],2),a("span",{staticClass:"crud-opts-left"},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Export"],expression:"['Base:Site:Export']"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-download",plain:""},on:{click:t.downMyOrder}},[t._v("导出")])],1)]),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"plTable",attrs:{data:t.dataList,height:t.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"carrierName",width:"120",label:"城配商名称"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteCode",label:"门店编码"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteName",label:"门店名称"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"contactName",label:"联系人"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"contactMobile",label:"手机号码"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"province",label:"省份"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"city",label:"城市"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"area",label:"区/县"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"town",label:"街道"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"detailAddress",label:"详细地址"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lng",label:"经度"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lat",label:"纬度"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"assignSwitch",label:"控单开关"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"assignLimit",label:"配送上限"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"stockLimit",label:"存货上限"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteType",label:"门店类型"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteGrade",label:"门店等级"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"siteExtent",width:"120",label:"门店面积(M²)"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"openTime",width:"120",label:"开始营业时间"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"closeTime",width:"120",label:"结束营业时间"}}),a("u-table-column",{attrs:{label:"禁用",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["是"==e.row.disable?a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.disable))]):"否"==e.row.disable?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.disable))]):t._e()]}}])}),a("u-table-column",{attrs:{label:"操作",width:"185",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Edit"],expression:"['Base:Site:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.editStaff(e.row)}}},[t._v("修改")]),"否"==e.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Disable"],expression:"['Base:Site:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定禁用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.editDisable(e)}}},[t._v("确定")])],1),a("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[t._v("禁用")])],1):t._e(),"是"==e.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["Base:Site:Disable"],expression:"['Base:Site:Disable']"}],ref:"popover-"+e.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),t._v(" 确定启用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.editDisable(e)}}},[t._v("确定")])],1),a("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[t._v("启用")])],1):t._e()]}}])})],1),a("pagination",{attrs:{limit:t.searchData.limit,page:t.searchData.page,total:t.total,"page-sizes":t.pageSizes},on:{"update:limit":function(e){return t.$set(t.searchData,"limit",e)},"update:page":function(e){return t.$set(t.searchData,"page",e)},"update:pageSizes":function(e){t.pageSizes=e},"update:page-sizes":function(e){t.pageSizes=e},pagination:t.loadData}})],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.formIsshow,title:t.titleContent,width:"720px"},on:{"update:visible":function(e){t.formIsshow=e}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:t.formData,rules:t.rules,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"城配商",prop:"carrierId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.formData.carrierId,callback:function(e){t.$set(t.formData,"carrierId",e)},expression:"formData.carrierId"}},t._l(t.carrier,(function(t){return a("el-option",{key:t.carrierId,attrs:{label:t.carrierName,value:t.carrierId}})})),1)],1),a("el-form-item",{attrs:{label:"门店编码",prop:"siteCode"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入门店编码"},model:{value:t.formData.siteCode,callback:function(e){t.$set(t.formData,"siteCode",e)},expression:"formData.siteCode"}})],1),a("el-form-item",{attrs:{label:"门店名称",prop:"siteName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入门店名称"},model:{value:t.formData.siteName,callback:function(e){t.$set(t.formData,"siteName",e)},expression:"formData.siteName"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"contactName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入负责人"},model:{value:t.formData.contactName,callback:function(e){t.$set(t.formData,"contactName",e)},expression:"formData.contactName"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"contactMobile"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:t.formData.contactMobile,callback:function(e){t.$set(t.formData,"contactMobile",e)},expression:"formData.contactMobile"}})],1),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入省份"},model:{value:t.formData.province,callback:function(e){t.$set(t.formData,"province",e)},expression:"formData.province"}})],1),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入城市"},model:{value:t.formData.city,callback:function(e){t.$set(t.formData,"city",e)},expression:"formData.city"}})],1),a("el-form-item",{attrs:{label:"区/县",prop:"area"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入区/县"},model:{value:t.formData.area,callback:function(e){t.$set(t.formData,"area",e)},expression:"formData.area"}})],1),a("el-form-item",{attrs:{label:"街道",prop:"town"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入街道"},model:{value:t.formData.town,callback:function(e){t.$set(t.formData,"town",e)},expression:"formData.town"}})],1),a("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入详细地址"},model:{value:t.formData.detailAddress,callback:function(e){t.$set(t.formData,"detailAddress",e)},expression:"formData.detailAddress"}})],1),a("el-form-item",{attrs:{label:"经度",prop:"lng"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入经度"},model:{value:t.formData.lng,callback:function(e){t.$set(t.formData,"lng",e)},expression:"formData.lng"}})],1),a("el-form-item",{attrs:{label:"纬度",prop:"lat"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入纬度"},model:{value:t.formData.lat,callback:function(e){t.$set(t.formData,"lat",e)},expression:"formData.lat"}})],1),a("el-form-item",{attrs:{label:"控单开关",prop:"assignSwitch"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.formData.assignSwitch,callback:function(e){t.$set(t.formData,"assignSwitch",e)},expression:"formData.assignSwitch"}},[a("el-option",{attrs:{value:"开",label:"开"}}),a("el-option",{attrs:{value:"关",label:"关"}})],1)],1),a("el-form-item",{attrs:{label:"配送上限",prop:"assignLimit"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入配送上限"},model:{value:t.formData.assignLimit,callback:function(e){t.$set(t.formData,"assignLimit",e)},expression:"formData.assignLimit"}})],1),a("el-form-item",{attrs:{label:"存货上限",prop:"stockLimit"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入存货上限"},model:{value:t.formData.stockLimit,callback:function(e){t.$set(t.formData,"stockLimit",e)},expression:"formData.stockLimit"}})],1),a("el-form-item",{attrs:{label:"门店类型",prop:"siteType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.formData.siteType,callback:function(e){t.$set(t.formData,"siteType",e)},expression:"formData.siteType"}},[a("el-option",{attrs:{value:"委外",label:"委外"}}),a("el-option",{attrs:{value:"自营",label:"自营"}})],1)],1),a("el-form-item",{attrs:{label:"门店等级",prop:"siteGrade"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.formData.siteGrade,callback:function(e){t.$set(t.formData,"siteGrade",e)},expression:"formData.siteGrade"}},[a("el-option",{attrs:{value:"一级",label:"一级"}}),a("el-option",{attrs:{value:"二级",label:"二级"}})],1)],1),a("el-form-item",{attrs:{label:"门店面积",prop:"siteExtent"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入门店面积(M²)"},model:{value:t.formData.siteExtent,callback:function(e){t.$set(t.formData,"siteExtent",e)},expression:"formData.siteExtent"}})],1),a("el-form-item",{attrs:{label:"开始营业时间",prop:"openTime"}},[a("el-time-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"HH:mm:ss",placeholder:"选择时间点"},model:{value:t.formData.openTime,callback:function(e){t.$set(t.formData,"openTime",e)},expression:"formData.openTime"}})],1),a("el-form-item",{attrs:{label:"结束营业时间",prop:"closeTime"}},[a("el-time-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"HH:mm:ss",placeholder:"选择时间点"},model:{value:t.formData.closeTime,callback:function(e){t.$set(t.formData,"closeTime",e)},expression:"formData.closeTime"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.formIsshow=!1}}},[t._v("取消")]),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.addForm,expression:"addForm"}],attrs:{type:"primary"}},[t._v("确认")])],1)],1)],1)},i=[],s=a("00f6"),r=s["a"],l=a("2877"),n=Object(l["a"])(r,o,i,!1,null,null,null);e["default"]=n.exports},efb6:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"f",(function(){return n})),a.d(e,"d",(function(){return c}));var o=a("b775");function i(t){return Object(o["a"])({url:"xnkj/base/site/siteList",method:"post",data:t})}function s(t){return Object(o["a"])({url:"xnkj/base/site/editSite",method:"post",data:t})}function r(t){return Object(o["a"])({url:"xnkj/base/site/addSite",method:"post",data:t})}function l(t){return Object(o["a"])({url:"xnkj/base/site/disableSite",method:"post",data:t})}function n(t){return Object(o["a"])({url:"xnkj/base/site/importSite",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function c(t){return Object(o["a"])({url:"xnkj/base/site/exportSite",method:"post",data:t})}}}]);