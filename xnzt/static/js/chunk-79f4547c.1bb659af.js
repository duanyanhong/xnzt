(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79f4547c"],{"22b9":function(e,t,a){"use strict";(function(e){var r=a("2d8e");t["a"]={name:"User",data:function(){return{rules:{userAccount:[{required:!0,message:"请输入账号",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],userPwd:[{required:!0,message:"请输入密码",trigger:"blur"}],mobileNo:[{required:!0,trigger:"blur",message:"请输入手机号"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}],companyId:[{required:!0,message:"请选择公司",trigger:"change"}],departmentId:[{required:!0,message:"请选择部门",trigger:"change"}],expireTime:[{required:!0,message:"请选择到期时间",trigger:"change"}]},searchData:{userAccount:"",roleId:"",userName:"",limit:20,page:1,accessToken:sessionStorage.getItem("xn_token")},pageSizes:[20,50,100],dataList:[],total:0,loading:!1,formIsshow:!1,formData:{id:"",userAccount:"",userName:"",nickName:"",userPwd:"",mobileNo:"",roleId:"",resetPwd:"",lock:"",companyId:"",departmentId:"",expireTime:"",accessToken:sessionStorage.getItem("xn_token")},jsHeight:500,editStatus:!1,titleContent:"管理用户",company:[],department:[],role:[]}},mounted:function(){this.loadData()},activated:function(){var e=this;this.$nextTick((function(){e.$refs.plTable.doLayout()}))},methods:{loadData:function(){var t=this;this.loading=!0,Object(r["e"])(this.searchData).then((function(a){a&&(t.loading=!1,t.dataList=a.msgData.list.items,t.total=a.msgData.list.total,t.company=a.msgData.company,t.role=a.msgData.role,t.jsHeight=window.innerHeight-e(".head-container").outerHeight()-e(".crud-opts").outerHeight()-180)}))},search:function(){this.page=1,this.loadData()},addShow:function(){this.editStatus=!1,void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.department=[],this.formData.departmentId="",this.formData.companyId="",this.formData.userAccount="",this.formData.userName="",this.formData.nickName="",this.formData.mobileNo="",this.formData.userPwd="",this.formData.expireTime="",this.formData.id="",this.formData.roleId="",this.formData.lock="否",this.formData.resetPwd="否",this.formIsshow=!0},addForm:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;var a=e;a.editStatus?Object(r["c"])(a.formData).then((function(e){e&&(a.formIsshow=!1,a.$modal.notifySuccess(e.errMsg),a.loadData())})):Object(r["a"])(a.formData).then((function(e){e&&(a.formIsshow=!1,a.$modal.notifySuccess(e.errMsg),a.loadData())}))}))},editStaff:function(e){var t=this;void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields();var a={companyId:e.companyId,accessToken:sessionStorage.getItem("xn_token")};Object(r["d"])(a).then((function(a){a&&(t.department=a.msgData.departments,t.formData.companyId=e.companyId,t.formData.departmentId=e.departmentId,t.formData.userAccount=e.userAccount,t.formData.userName=e.userName,t.formData.nickName=e.nickName,t.formData.gender=e.gender,t.formData.mobileNo=e.mobileNo,t.formData.expireTime=e.expireTime,t.formData.userPwd=e.userPwd,t.formData.id=e.id,t.formData.roleId=e.roleId,t.formData.lock=e.lock,t.formData.resetPwd="否",t.editStatus=!0,t.formIsshow=!0)}))},editDisable:function(e){var t=this;this.$refs["popover-".concat(e.$index)].doClose();var a={id:e.row.id,accessToken:sessionStorage.getItem("xn_token")};Object(r["b"])(a).then((function(e){e&&(t.$modal.notifySuccess(e.errMsg),t.loadData())}))},getDepartment:function(){var e=this;this.formData.departmentId="";var t={companyId:this.formData.companyId,accessToken:sessionStorage.getItem("xn_token")};Object(r["d"])(t).then((function(t){t&&(e.department=t.msgData.departments)}))}}}}).call(this,a("1157"))},"2d8e":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return n}));var r=a("b775");function o(e){return Object(r["a"])({url:"xnkj/user/user/userList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"xnkj/user/user/editUser",method:"post",data:e})}function i(e){return Object(r["a"])({url:"xnkj/user/user/addUser",method:"post",data:e})}function l(e){return Object(r["a"])({url:"xnkj/user/user/disableUser",method:"post",data:e})}function n(e){return Object(r["a"])({url:"xnkj/user/user/getDepartment",method:"post",data:e})}},"60f0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("div",{staticClass:"head-container"},[a("div",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入账号搜索"},model:{value:e.searchData.userAccount,callback:function(t){e.$set(e.searchData,"userAccount",t)},expression:"searchData.userAccount"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"输入用户名搜索"},model:{value:e.searchData.userName,callback:function(t){e.$set(e.searchData,"userName",t)},expression:"searchData.userName"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"角色"},model:{value:e.searchData.roleId,callback:function(t){e.$set(e.searchData,"roleId",t)},expression:"searchData.roleId"}},[a("el-option",{attrs:{value:""}},[e._v("全部")]),e._l(e.role,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}))],2),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),a("div",{staticClass:"crud-opts"},[a("span",{staticClass:"crud-opts-left"},[e._t("left"),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["User:User:Add"],expression:"['User:User:Add']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:e.addShow}},[e._v(" 新增 ")]),e._t("right")],2)]),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"plTable",attrs:{data:e.dataList,height:e.jsHeight,"use-virtual":"","row-height":50,stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e",fontSize:"13px",height:"45px",border:"none"},"cell-style":{border:"none"}}},[a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"userAccount",label:"账号"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"userName",label:"用户名"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"nickName",label:"昵称"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"mobileNo",label:"手机号"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"roleName",label:"角色"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"companyName",label:"公司"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"departmentName",label:"部门"}}),a("u-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"expireTime",label:"到期时间"}}),a("u-table-column",{attrs:{label:"锁定",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"==t.row.lock?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.lock))]):"否"==t.row.lock?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.lock))]):e._e()]}}])}),a("u-table-column",{attrs:{label:"禁用",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["是"==t.row.disable?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.disable))]):"否"==t.row.disable?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.disable))]):e._e()]}}])}),a("u-table-column",{attrs:{label:"操作",width:"185",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["User:User:Edit"],expression:"['User:User:Edit']"}],staticStyle:{width:"50px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editStaff(t.row)}}},[e._v("修改")]),"否"==t.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["User:User:Disable"],expression:"['User:User:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定禁用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editDisable(t)}}},[e._v("确定")])],1),a("el-button",{staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-lock",size:"mini"},slot:"reference"},[e._v("禁用")])],1):e._e(),"是"==t.row.disable?a("el-popover",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["User:User:Disable"],expression:"['User:User:Disable']"}],ref:"popover-"+t.$index,attrs:{placement:"top",width:"200"}},[a("p",{staticStyle:{"line-height":"40px"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"rgb(255,153,0)"}}),e._v(" 确定启用吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs["popover-"+t.$index].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editDisable(t)}}},[e._v("确定")])],1),a("el-button",{staticClass:"el-button--success",staticStyle:{width:"50px"},attrs:{slot:"reference",type:"text",icon:"el-icon-unlock",size:"mini"},slot:"reference"},[e._v("启用")])],1):e._e()]}}])})],1),a("pagination",{attrs:{limit:e.searchData.limit,page:e.searchData.page,total:e.total,"page-sizes":e.pageSizes},on:{"update:limit":function(t){return e.$set(e.searchData,"limit",t)},"update:page":function(t){return e.$set(e.searchData,"page",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.loadData}})],1)],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:e.formIsshow,title:e.titleContent,width:"650px"},on:{"update:visible":function(t){e.formIsshow=t}}},[a("el-form",{ref:"formData",attrs:{inline:!0,model:e.formData,rules:e.rules,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"账号",prop:"userAccount"}},[1==e.editStatus?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入账号",disabled:""},model:{value:e.formData.userAccount,callback:function(t){e.$set(e.formData,"userAccount",t)},expression:"formData.userAccount"}}):e._e(),0==e.editStatus?a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入账号"},model:{value:e.formData.userAccount,callback:function(t){e.$set(e.formData,"userAccount",t)},expression:"formData.userAccount"}}):e._e()],1),0==e.editStatus?a("el-form-item",{attrs:{label:"密码",prop:"userPwd"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.formData.userPwd,callback:function(t){e.$set(e.formData,"userPwd",t)},expression:"formData.userPwd"}})],1):e._e(),a("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入昵称"},model:{value:e.formData.nickName,callback:function(t){e.$set(e.formData,"nickName",t)},expression:"formData.nickName"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobileNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机"},model:{value:e.formData.mobileNo,callback:function(t){e.$set(e.formData,"mobileNo",t)},expression:"formData.mobileNo"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.formData.roleId,callback:function(t){e.$set(e.formData,"roleId",t)},expression:"formData.roleId"}},e._l(e.role,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"公司",prop:"companyId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:e.getDepartment},model:{value:e.formData.companyId,callback:function(t){e.$set(e.formData,"companyId",t)},expression:"formData.companyId"}},e._l(e.company,(function(e){return a("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.formData.departmentId,callback:function(t){e.$set(e.formData,"departmentId",t)},expression:"formData.departmentId"}},e._l(e.department,(function(e){return a("el-option",{key:e.departmentId,attrs:{label:e.departmentName,value:e.departmentId}})})),1)],1),a("el-form-item",{attrs:{label:"到期时间",prop:"expireTime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formData.expireTime,callback:function(t){e.$set(e.formData,"expireTime",t)},expression:"formData.expireTime"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editStatus,expression:"editStatus==true"}],attrs:{label:"是否锁定",prop:"lock"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.formData.lock,callback:function(t){e.$set(e.formData,"lock",t)},expression:"formData.lock"}},[a("el-option",{attrs:{value:"是",label:"是"}}),a("el-option",{attrs:{value:"否",label:"否"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editStatus,expression:"editStatus==true"}],attrs:{label:"重置密码",prop:"resetPwd"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.formData.resetPwd,callback:function(t){e.$set(e.formData,"resetPwd",t)},expression:"formData.resetPwd"}},[a("el-option",{attrs:{value:"是",label:"是"}}),a("el-option",{attrs:{value:"否",label:"否"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.formIsshow=!1}}},[e._v("取消")]),a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.addForm,expression:"addForm"}],attrs:{type:"primary"}},[e._v("确认")])],1)],1)],1)},o=[],s=a("22b9"),i=s["a"],l=a("2877"),n=Object(l["a"])(i,r,o,!1,null,null,null);t["default"]=n.exports}}]);